# rcomm

A multi-threaded HTTP web server written in Rust from scratch with zero external dependencies. It serves static HTML, CSS, and JavaScript files using convention-based routing derived from the `pages/` directory structure.

## Getting Started

```bash
cargo build
cargo run
```

The server starts on `127.0.0.1:7878` by default. Override with environment variables:

```bash
RCOMM_PORT=8080 RCOMM_ADDRESS=0.0.0.0 cargo run
```

## Convention-Based Routing

Routes are auto-generated by scanning the `pages/` directory:

| File                              | Route              |
|-----------------------------------|--------------------|
| `pages/index.html`               | `/`                |
| `pages/howdy/page.html`          | `/howdy`           |
| `pages/howdy/page.css`           | `/howdy/page.css`  |
| `pages/not_found.html`           | *(404 page)*       |

Files named `index.html` or `page.html` become routes at their directory's path level. Other `.html`, `.css`, and `.js` files are routed by their full relative path. `not_found.html` is reserved for 404 responses.

## Architecture

- **Thread Pool** (`src/lib.rs`) -- Custom pool using `mpsc` channels and `Arc<Mutex<Receiver>>` for work distribution. 4 workers by default with graceful shutdown via `Drop`.
- **HTTP Models** (`src/models/`) -- Hand-rolled HTTP request/response parsing and serialization. No external parser or framework.
- **Routing** (`src/main.rs`) -- Recursive `pages/` directory scanner builds a route table at startup. Path traversal segments (`.`, `..`) are stripped.

## Testing

```bash
cargo test                             # Unit tests
cargo run --bin integration_test       # Integration tests (spawns a real server)
```
